[tox]
envlist =
    py35-format
    py{27,35}-{flake8,unit,functional}
    py27-modules
    #docs

[testenv]
passenv = TOXENV CI TRAVIS TRAVIS_*
usedevelop = True
install_command = pip install -U {opts} {packages}
deps =
    -r{toxinidir}/test-requirements.txt
    flake8: flake8
    py35-flake8: flake8-bugbear
    modules: pytest-ansible
    {unit,functional}: pytest
    format: yapf
setenv =
    ANSIBLE_LIBRARY = {toxinidir}/ansible/library
commands =
    python -V
#    docs: python setup.py build_sphinx
    flake8: flake8
    unit: pytest -m 'not functional and not ansible'
    functional: pytest -m 'functional'
    modules: pytest -m 'ansible' --ansible-host-pattern all
    format: yapf -i -r openshift/ansible/
    format: yapf -i -r ansible/

#[testenv:coverage]
#commands =
#   python -V
#   nosetests --with-coverage --cover-package=kubernetes.config,kubernetes.watch --cover-tests
#
#[testenv:codecov]
#commands =
#   codecov
